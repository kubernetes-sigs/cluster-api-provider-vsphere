
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: vspheremachines.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: VSphereMachine
    plural: vspheremachines
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: VSphereMachine is the Schema for the vspheremachines API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: VSphereMachineSpec defines the desired state of VSphereMachine
          properties:
            datacenter:
              description: Datacenter is the name or inventory path of the datacenter
                where this machine's VM is created/located.
              type: string
            diskGiB:
              description: DiskGiB is the size of a virtual machine's disk, in GiB.
                Defaults to the analogue property value in the template from which
                this machine is cloned.
              format: int32
              type: integer
            memoryMiB:
              description: MemoryMiB is the size of a virtual machine's memory, in
                MiB. Defaults to the analogue property value in the template from
                which this machine is cloned.
              format: int64
              type: integer
            network:
              description: Network is the network configuration for this machine's
                VM.
              properties:
                devices:
                  description: Devices is the list of network devices used by the
                    virtual machine. TODO(akutz) Make sure at least one network matches
                    the             ClusterSpec.CloudProviderConfiguration.Network.Name
                  items:
                    description: NetworkDeviceSpec defines the network configuration
                      for a virtual machine's network device.
                    properties:
                      dhcp4:
                        description: DHCP4 is a flag that indicates whether or not
                          to use DHCP for IPv4 on this device. If true then IPAddrs
                          should not contain any IPv4 addresses.
                        type: boolean
                      dhcp6:
                        description: DHCP6 is a flag that indicates whether or not
                          to use DHCP for IPv6 on this device. If true then IPAddrs
                          should not contain any IPv6 addresses.
                        type: boolean
                      gateway4:
                        description: Gateway4 is the IPv4 gateway used by this device.
                          Required when DHCP4 is false.
                        type: string
                      gateway6:
                        description: Gateway4 is the IPv4 gateway used by this device.
                          Required when DHCP6 is false.
                        type: string
                      ipAddrs:
                        description: IPAddrs is a list of one or more IPv4 and/or
                          IPv6 addresses to assign to this device. Required when DHCP4
                          and DHCP6 are both false.
                        items:
                          type: string
                        type: array
                      macAddr:
                        description: MACAddr is the MAC address used by this device.
                          It is generally a good idea to omit this field and allow
                          a MAC address to be generated. Please note that this value
                          must use the VMware OUI to work with the in-tree vSphere
                          cloud provider.
                        type: string
                      mtu:
                        description: MTU is the deviceâ€™s Maximum Transmission Unit
                          size in bytes.
                        format: int64
                        type: integer
                      nameservers:
                        description: Nameservers is a list of IPv4 and/or IPv6 addresses
                          used as DNS nameservers. Please note that Linux allows only
                          three nameservers (https://linux.die.net/man/5/resolv.conf).
                        items:
                          type: string
                        type: array
                      networkName:
                        description: NetworkName is the name of the vSphere network
                          to which the device will be connected.
                        type: string
                      routes:
                        description: Routes is a list of optional, static routes applied
                          to the device.
                        items:
                          description: NetworkRouteSpec defines a static network route.
                          properties:
                            metric:
                              description: Metric is the weight/priority of the route.
                              format: int32
                              type: integer
                            to:
                              description: To is an IPv4 or IPv6 address.
                              type: string
                            via:
                              description: Via is an IPv4 or IPv6 address.
                              type: string
                          required:
                          - metric
                          - to
                          - via
                          type: object
                        type: array
                      searchDomains:
                        description: SearchDomains is a list of search domains used
                          when resolving IP addresses with DNS.
                        items:
                          type: string
                        type: array
                    required:
                    - networkName
                    type: object
                  type: array
                preferredAPIServerCidr:
                  description: PreferredAPIServeCIDR is the preferred CIDR for the
                    Kubernetes API server endpoint on this machine
                  type: string
                routes:
                  description: Routes is a list of optional, static routes applied
                    to the virtual machine.
                  items:
                    description: NetworkRouteSpec defines a static network route.
                    properties:
                      metric:
                        description: Metric is the weight/priority of the route.
                        format: int32
                        type: integer
                      to:
                        description: To is an IPv4 or IPv6 address.
                        type: string
                      via:
                        description: Via is an IPv4 or IPv6 address.
                        type: string
                    required:
                    - metric
                    - to
                    - via
                    type: object
                  type: array
              required:
              - devices
              type: object
            numCPUs:
              description: NumCPUs is the number of virtual processors in a virtual
                machine. Defaults to the analogue property value in the template from
                which this machine is cloned.
              format: int32
              type: integer
            numCoresPerSocket:
              description: NumCPUs is the number of cores among which to distribute
                CPUs in this virtual machine. Defaults to the analogue property value
                in the template from which this machine is cloned.
              format: int32
              type: integer
            providerID:
              description: ProviderID is the virtual machine's BIOS UUID formated
                as vsphere://12345678-1234-1234-1234-123456789abc
              type: string
            template:
              description: Template is the name, inventory path, or instance UUID
                of the template used to clone new machines.
              type: string
          required:
          - datacenter
          - network
          - template
          type: object
        status:
          description: VSphereMachineStatus defines the observed state of VSphereMachine
          properties:
            addresses:
              description: Addresses contains the VSphere instance associated addresses.
              items:
                description: NodeAddress contains information for the node's address.
                properties:
                  address:
                    description: The node address.
                    type: string
                  type:
                    description: Node address type, one of Hostname, ExternalIP or
                      InternalIP.
                    type: string
                required:
                - address
                - type
                type: object
              type: array
            errorMessage:
              description: "ErrorMessage will be set in the event that there is a
                terminal problem reconciling the Machine and will contain a more verbose
                string suitable for logging and human consumption. \n This field should
                not be set for transitive errors that a controller faces that are
                expected to be fixed automatically over time (like service outages),
                but instead indicate that something is fundamentally wrong with the
                Machine's spec or the configuration of the controller, and that manual
                intervention is required. Examples of terminal errors would be invalid
                combinations of settings in the spec, values that are unsupported
                by the controller, or the responsible controller itself being critically
                misconfigured. \n Any transient errors that occur during the reconciliation
                of Machines can be added as events to the Machine object and/or logged
                in the controller's output."
              type: string
            errorReason:
              description: "ErrorReason will be set in the event that there is a terminal
                problem reconciling the Machine and will contain a succinct value
                suitable for machine interpretation. \n This field should not be set
                for transitive errors that a controller faces that are expected to
                be fixed automatically over time (like service outages), but instead
                indicate that something is fundamentally wrong with the Machine's
                spec or the configuration of the controller, and that manual intervention
                is required. Examples of terminal errors would be invalid combinations
                of settings in the spec, values that are unsupported by the controller,
                or the responsible controller itself being critically misconfigured.
                \n Any transient errors that occur during the reconciliation of Machines
                can be added as events to the Machine object and/or logged in the
                controller's output."
              type: string
            networkStatus:
              description: Network returns the network status for each of the machine's
                configured network interfaces.
              items:
                description: NetworkStatus provides information about one of a VM's
                  networks.
                properties:
                  connected:
                    description: Connected is a flag that indicates whether this network
                      is currently connected to the VM.
                    type: boolean
                  ipAddrs:
                    description: IPAddrs is one or more IP addresses reported by vm-tools.
                    items:
                      type: string
                    type: array
                  macAddr:
                    description: MACAddr is the MAC address of the network device.
                    type: string
                  networkName:
                    description: NetworkName is the name of the network.
                    type: string
                required:
                - macAddr
                type: object
              type: array
            ready:
              description: Ready is true when the provider resource is ready.
              type: boolean
            taskRef:
              description: TaskRef is a managed object reference to a Task related
                to the machine. This value is set automatically at runtime and should
                not be set or modified by users.
              type: string
          type: object
      type: object
  version: v1alpha2
  versions:
  - name: v1alpha2
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
