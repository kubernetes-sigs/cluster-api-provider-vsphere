---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: vsphereclustertemplates.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: VSphereClusterTemplate
    listKind: VSphereClusterTemplateList
    plural: vsphereclustertemplates
    singular: vsphereclustertemplate
  scope: Namespaced
  versions:
  - deprecated: true
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: VSphereClusterTemplate is the Schema for the vsphereclustertemplates
          API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: VSphereClusterTemplateSpec defines the desired state of VSphereClusterTemplate.
            properties:
              template:
                description: VSphereClusterTemplateResource describes the data for
                  creating a VSphereCluster from a template.
                properties:
                  spec:
                    description: VSphereClusterSpec defines the desired state of VSphereCluster.
                    properties:
                      clusterModules:
                        description: |-
                          ClusterModules hosts information regarding the anti-affinity vSphere constructs
                          for each of the objects responsible for creation of VM objects belonging to the cluster.
                        items:
                          description: |-
                            ClusterModule holds the anti affinity construct `ClusterModule` identifier
                            in use by the VMs owned by the object referred by the TargetObjectName field.
                          properties:
                            controlPlane:
                              description: |-
                                ControlPlane indicates whether the referred object is responsible for control plane nodes.
                                Currently, only the KubeadmControlPlane objects have this flag set to true.
                                Only a single object in the slice can have this value set to true.
                              type: boolean
                            moduleUUID:
                              description: ModuleUUID is the unique identifier of
                                the `ClusterModule` used by the object.
                              type: string
                            targetObjectName:
                              description: |-
                                TargetObjectName points to the object that uses the Cluster Module information to enforce
                                anti-affinity amongst its descendant VM objects.
                              type: string
                          required:
                          - controlPlane
                          - moduleUUID
                          - targetObjectName
                          type: object
                        type: array
                      controlPlaneEndpoint:
                        description: ControlPlaneEndpoint represents the endpoint
                          used to communicate with the control plane.
                        properties:
                          host:
                            description: The hostname on which the API server is serving.
                            type: string
                          port:
                            description: The port on which the API server is serving.
                            format: int32
                            type: integer
                        type: object
                      disableClusterModule:
                        description: |-
                          DisableClusterModule is used to explicitly turn off the ClusterModule feature.
                          This should work along side NodeAntiAffinity feature flag.
                          If the NodeAntiAffinity feature flag is turned off, this will be disregarded.
                        type: boolean
                      failureDomainSelector:
                        description: |-
                          FailureDomainSelector is the label selector to use for failure domain selection
                          for the control plane nodes of the cluster.
                          If not set (`nil`), selecting failure domains will be disabled.
                          An empty value (`{}`) selects all existing failure domains.
                          A valid selector will select all failure domains which match the selector.
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: |-
                                A label selector requirement is a selector that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: |-
                                    operator represents a key's relationship to a set of values.
                                    Valid operators are In, NotIn, Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: |-
                                    values is an array of string values. If the operator is In or NotIn,
                                    the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                    the values array must be empty. This array is replaced during a strategic
                                    merge patch.
                                  items:
                                    type: string
                                  type: array
                                  x-kubernetes-list-type: atomic
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                            x-kubernetes-list-type: atomic
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: |-
                              matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                              map is equivalent to an element of matchExpressions, whose key field is "key", the
                              operator is "In", and the values array contains only "value". The requirements are ANDed.
                            type: object
                        type: object
                        x-kubernetes-map-type: atomic
                      identityRef:
                        description: |-
                          IdentityRef is a reference to either a Secret or VSphereClusterIdentity that contains
                          the identity to use when reconciling the cluster.
                        properties:
                          kind:
                            description: Kind of the identity. Can either be VSphereClusterIdentity
                              or Secret
                            enum:
                            - VSphereClusterIdentity
                            - Secret
                            type: string
                          name:
                            description: Name of the identity.
                            minLength: 1
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      server:
                        description: Server is the address of the vSphere endpoint.
                        type: string
                      thumbprint:
                        description: Thumbprint is the colon-separated SHA-1 checksum
                          of the given vCenter server's host certificate
                        type: string
                    type: object
                required:
                - spec
                type: object
            required:
            - template
            type: object
        type: object
    served: true
    storage: false
  - additionalPrinterColumns:
    - description: Name of the ClusterClass owning this template
      jsonPath: .metadata.ownerReferences[?(@.kind=="ClusterClass")].name
      name: ClusterClass
      type: string
    - description: Time duration since creation of VSphereClusterTemplate
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: VSphereClusterTemplate is the Schema for the vsphereclustertemplates
          API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: spec is the desired state of VSphereClusterTemplate.
            properties:
              template:
                description: template defines the desired state of VSphereClusterTemplate.
                minProperties: 1
                properties:
                  metadata:
                    description: |-
                      metadata is the standard object's metadata.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
                    minProperties: 1
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: |-
                          annotations is an unstructured key value map stored with a resource that may be
                          set by external tools to store and retrieve arbitrary metadata. They are not
                          queryable and should be preserved when modifying objects.
                          More info: http://kubernetes.io/docs/user-guide/annotations
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        description: |-
                          labels is a map of string keys and values that can be used to organize and categorize
                          (scope and select) objects. May match selectors of replication controllers
                          and services.
                          More info: http://kubernetes.io/docs/user-guide/labels
                        type: object
                    type: object
                  spec:
                    description: spec is the desired state of VSphereClusterTemplateResource.
                    properties:
                      clusterModules:
                        description: |-
                          clusterModules hosts information regarding the anti-affinity vSphere constructs
                          for each of the objects responsible for creation of VM objects belonging to the cluster.
                        items:
                          description: |-
                            ClusterModule holds the anti affinity construct `ClusterModule` identifier
                            in use by the VMs owned by the object referred by the TargetObjectName field.
                          properties:
                            controlPlane:
                              description: |-
                                controlPlane indicates whether the referred object is responsible for control plane nodes.
                                Currently, only the KubeadmControlPlane objects have this flag set to true.
                                Only a single object in the slice can have this value set to true.
                              type: boolean
                            moduleUUID:
                              description: moduleUUID is the unique identifier of
                                the `ClusterModule` used by the object.
                              maxLength: 2048
                              minLength: 1
                              type: string
                            targetObjectName:
                              description: |-
                                targetObjectName points to the object that uses the Cluster Module information to enforce
                                anti-affinity amongst its descendant VM objects.
                              maxLength: 253
                              minLength: 1
                              type: string
                          required:
                          - controlPlane
                          - moduleUUID
                          - targetObjectName
                          type: object
                        maxItems: 512
                        type: array
                        x-kubernetes-list-type: atomic
                      controlPlaneEndpoint:
                        description: controlPlaneEndpoint represents the endpoint
                          used to communicate with the control plane.
                        minProperties: 1
                        properties:
                          host:
                            description: host is the hostname on which the API server
                              is serving.
                            maxLength: 512
                            minLength: 1
                            type: string
                          port:
                            description: port is the port on which the API server
                              is serving.
                            format: int32
                            maximum: 65535
                            minimum: 1
                            type: integer
                        type: object
                      disableClusterModule:
                        description: |-
                          disableClusterModule is used to explicitly turn off the ClusterModule feature.
                          This should work along side NodeAntiAffinity feature flag.
                          If the NodeAntiAffinity feature flag is turned off, this will be disregarded.
                        type: boolean
                      failureDomainSelector:
                        description: |-
                          failureDomainSelector is the label selector to use for failure domain selection
                          for the control plane nodes of the cluster.
                          If not set (`nil`), selecting failure domains will be disabled.
                          An empty value (`{}`) selects all existing failure domains.
                          A valid selector will select all failure domains which match the selector.
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: |-
                                A label selector requirement is a selector that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: |-
                                    operator represents a key's relationship to a set of values.
                                    Valid operators are In, NotIn, Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: |-
                                    values is an array of string values. If the operator is In or NotIn,
                                    the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                    the values array must be empty. This array is replaced during a strategic
                                    merge patch.
                                  items:
                                    type: string
                                  type: array
                                  x-kubernetes-list-type: atomic
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                            x-kubernetes-list-type: atomic
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: |-
                              matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                              map is equivalent to an element of matchExpressions, whose key field is "key", the
                              operator is "In", and the values array contains only "value". The requirements are ANDed.
                            type: object
                        type: object
                        x-kubernetes-map-type: atomic
                      identityRef:
                        description: |-
                          identityRef is a reference to either a Secret or VSphereClusterIdentity that contains
                          the identity to use when reconciling the cluster.
                        properties:
                          kind:
                            description: kind of the identity. Can either be VSphereClusterIdentity
                              or Secret
                            enum:
                            - VSphereClusterIdentity
                            - Secret
                            type: string
                          name:
                            description: name of the identity.
                            maxLength: 253
                            minLength: 1
                            type: string
                        required:
                        - kind
                        - name
                        type: object
                      server:
                        description: server is the address of the vSphere endpoint.
                        maxLength: 1024
                        minLength: 1
                        type: string
                      thumbprint:
                        description: thumbprint is the colon-separated SHA-1 checksum
                          of the given vCenter server's host certificate
                        maxLength: 1024
                        minLength: 1
                        type: string
                    required:
                    - server
                    type: object
                type: object
            required:
            - template
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
